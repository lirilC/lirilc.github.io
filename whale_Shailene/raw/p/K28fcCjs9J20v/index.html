<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="en">
<head>
<title>--The Whole Board--</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Pragma" content="no-cache">
<meta name="http-equiv" content="Content-type: text/html; charset=ISO-88591"/>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="https://lo-th.github.io/lab/css/lab.css">
<link rel="stylesheet" href="css/style.css">
<!--<jQUery>-->
<script
src="https://code.jquery.com/jquery-3.6.0.min.js"
integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
crossorigin="anonymous"></script>

<!--<CODE / LAB>-->
<script src="./build/code.js"></script>
<script src="./build/lab.js"></script>

<!--<MAIN>-->
<script src="./build/shot.min.js"></script>
<script src="./js/main.js"></script>
</head>

<body>
<button disabled id= "Throw">Tirar los dados</button>
<display>
	<log></log>
	<img src="/" alt="">
	<div><button id="acquire">Adquirir</button><button id="refuse">Declinar</button></div>
</display>
<debuggers>
    <div class="burger"><span>...</span></div>
</debuggers>
<script>

window.onload = init;

$("#Throw").on("click", function(){
    if(!$("#Throw").attr("disabled")){
        dices.inform(dices.throw())
    	$("#Throw").blur()
        dices.disable_throw()
        while(chaR(activeChar).posiTion + (Throw[0] + Throw[1]) > 47 ){
        	chaR(activeChar).posiTion -= 48
        }
        chaR(activeChar).posiTion+= (Throw[0] + Throw[1])
    }
    $("#Throw").blur()
})
$("#acquire").on("click", function(){
    if(!!active_recTangle){
    	if("undefined"!=typeof recTangle_info[active_recTangle])chaR(activeChar).currencies -= recTangle_info[active_recTangle].price
        if("undefined"!=typeof recTangle_info[active_recTangle])recTangle_info[active_recTangle].funcTion()
        setTimeout(function(){
        	nextChar= activeChar + 1 <= 3? activeChar + 1: 0
            bReak= false
        	while(chaR(nextChar).skip && !bReak){
				chaR(nextChar).skip--
                if(!chaR(nextChar).skip){
                    chaR(nextChar).desterrado= true
                }
        		nextChar= nextChar + 1 <= 3? nextChar + 1: 0
        	}
            if("undefined"!==typeof chaR(nextChar).desterrado){
                physic.matrix( [ { name:CARS[activeChar].name, pos: [ 32.5, 1, -45.5], noVelocity:true } ] )
                delete chaR(nextChar).desterrado
            }
        	changeChar(nextChar)
            dices.setThrower(nextChar)
            activeChar= nextChar
        }, 3000)
    }
})
$("#refuse").on("click", function(){
    if(!!active_recTangle){
        if("undefined"!=typeof recTangle_info[active_recTangle])recTangle_info[active_recTangle].re_fusTion()
        setTimeout(function(){
        	nextChar= activeChar + 1 <= 3? activeChar + 1: 0
        	while(chaR(nextChar).skip){
				chaR(nextChar).skip--
                if(!chaR(nextChar).skip){
                    chaR(nextChar).desterrado= true
                }
        		nextChar= nextChar + 1 <= 3? nextChar + 1: 0
        	}
            if("undefined"!==typeof chaR(nextChar).desterrado){
                physic.matrix( [ { name:CARS[activeChar].name, pos: [ 32.5, 1, -45.5], noVelocity:true } ] )
                delete chaR(nextChar).desterrado
            }
        	changeChar(nextChar)
            dices.setThrower(nextChar)
            activeChar= nextChar
        }, 3000)
    }
})
window.display= {}
window.burger= {}
window.info= {}
window.dices= {}
window.Throw= []
window.chaR= function(N){
    return Object.values(char)[N]
}
display.log= function(t){
    document.querySelector("display log").innerHTML= `${t}`
}
burger.write= function(t){
    document.querySelector(".burger span").innerHTML= `${t}`
}

info.clear= function(){
    $("display img").attr("src", "")
    display.log('')
    burger.write('')
}
info.show= function(i){
    if("undefined"==typeof i){
        info.clear()
        return
    }
    $("display img").attr("src", i.pic)
    display.log(i.title)
    burger.write(i.description)
}


dices.throw= function(no_luck__experienced_method){if(no_luck__experienced_method || !!!no_luck__experienced_method){return [parseInt(Math.random() * 6) + 1, parseInt(Math.random() * 6) + 1]}}

dices.inform= function(th){
    Throw= th;
    alert(`${th[0]} y ${th[1]} (${(th[0] + th[1])})`)    
}
dices.disable_throw= function(){
    $("#Throw").attr("disabled", "true")
    $("#Throw").text(`Tirar los dados`)
    $("#Throw").blur()
}
dices.setThrower= function(T){
    $("#Throw").removeAttr("disabled")
    activeChar= T;
    $("#Throw").text(`Tirar los dados. (${chaR(T).name})`)
}

</script>
</body>
</html>